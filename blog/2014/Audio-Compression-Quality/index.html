<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Audio Compression Quality | Maciek Tomczak</title> <meta name="author" content="Maciek Tomczak"> <meta name="description" content="On what's left out when compressing to MP3."> <meta name="keywords" content="machine-learning, neural-audio-synthesis, neural-drum-synthesis, music-information-retrieval"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/logo_icon.png?a1ef7fd43982ead0c22275eecba2496e"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://maciek-tomczak.github.io/blog/2014/Audio-Compression-Quality/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Maciek </span>Tomczak</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item"> <a class="nav-link" href="https://drive.google.com/open?id=10lnx5UwlpoNpXmMbkFBb5yGPgHof5FKq" target="_blank" rel="external nofollow noopener">cv</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Audio Compression Quality</h1> <p class="post-description">On what's left out when compressing to MP3.</p> </header> <article> <p>I wrote the following article back when I was an undergrad finishing my first year at Birmingham City University in 2013. Coincidentally, to my surprise the same experiment I describe here was given to me in class by my DSP professor Ian Williams a few weeks after I published this. Anyway, after revisiting these tests more recently I can sum them up with the good ol’ <em>it depends</em> :)</p> <p><strong>TL;DR</strong> A 320kbps VBR Mp3 can be enough but it depends to what you are listening to and what system you are listening that on.</p> <p>Original article is posted <a href="https://maciekonsound.wordpress.com/2014/12/19/listening-tests/" rel="external nofollow noopener" target="_blank">here</a>.</p> <h2>Listening Tests</h2> <p style="text-align:left;" align="CENTER">So in the previous <a title="Article on CD Ripping" href="https://maciek-tomczak.github.io/maciek.github.io/Audio-Ripping-and-Compression" target="_blank">article</a> we managed to rip and compress our really good quality Mp3s. So now its right time to ask questions… Just how good are these Mp3s if compared to the sound on a CD? Have we set up the encoder correctly? The most obvious way to find out is to conduct a listening test, but…</p> <p>But there is a problem.</p> <p>It turns out that it is quite challenging to compare two audio sources of different quality, timing, and volume. The traditional method of audio listening tests is to play one song followed by another and ask which one sounded better. Interestingly enough, our brains recognize a slight increase in volume as an increase in clarity, which is critical in this situation, as we want to avoid possibility of confirmation bias. We need a way of switching between two audio sources of different quality at any point in a song, with no delays or changes in timing and volume.</p> <p>I’ve observed many fierce debates in real live and online, where people insisted that they can hear the difference between 320kbps Mp3s and ones of even slightly lower bit rate. Some say that Mp3s are no good enough for ‘serious’ audio equipment. Let’s hear if this is true.</p> <p>I ripped one song from the same CD as an uncompressed wave file, as a 320 bit rate Mp3 and as the blend of VBR.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/11-480.webp 480w, /_pages/maciek.github.io/audio-compression/11-800.webp 800w, /_pages/maciek.github.io/audio-compression/11-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/11.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>I imported the raw wave file and the 320kbps Mp3 into Audacity, one after the other.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/21-480.webp 480w, /_pages/maciek.github.io/audio-compression/21-800.webp 800w, /_pages/maciek.github.io/audio-compression/21-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/21.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>Since, the Mp3 compression process had padded the start and finish of the file, it is necessary to remove the silence so that both tracks are aligned.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/31-480.webp 480w, /_pages/maciek.github.io/audio-compression/31-800.webp 800w, /_pages/maciek.github.io/audio-compression/31-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/31.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>It’s quite slow and notorious to align both tracks as audacity does not support a user-friendly zoom in/out option. However, once you managed to zoom in so that you can see all the individual samples, I suggest to pick one that is standing out, and use it as a guide-sample.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/41-480.webp 480w, /_pages/maciek.github.io/audio-compression/41-800.webp 800w, /_pages/maciek.github.io/audio-compression/41-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/41.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>Now the interesting part kicks in. I selected the whole region of the 320kbps Mp3 and inverted it. It means that whenever the waveform had previously gone up it now is going down, and vice versa.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/51-480.webp 480w, /_pages/maciek.github.io/audio-compression/51-800.webp 800w, /_pages/maciek.github.io/audio-compression/51-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/51.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>Then I selected the uncompressed wave file with the inverted Mp3, and clicked mix and render.</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/61-480.webp 480w, /_pages/maciek.github.io/audio-compression/61-800.webp 800w, /_pages/maciek.github.io/audio-compression/61-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/61.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>This action created a mix file that represents the differences between our uncompressed and compressed files. I think it’s really interesting to see this pretty digital representation of the data chunk that we loose completely when compressing our CD files. This is how it sounds like: <audio controls="" src="./stage1_T1.wav"></audio></p> <p>Cool, right? Does it make a difference? :)</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/71-480.webp 480w, /_pages/maciek.github.io/audio-compression/71-800.webp 800w, /_pages/maciek.github.io/audio-compression/71-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/71.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>Then I imported a 320kbps Mp3 into Audacity. In the screenshot above you can see very clearly (on the same zoom-in setting on both tracks) differences in the sizes of both files. After this, I did the sample alignment again, and hit the play button. Both tracks plated simultaneously and sounded like the source CD. Mathematically, it was the source CD. The difference file and the compressed file equaled the source file. By muting the difference file at any point in the song, I could hear without distortion, or changes in volume, what is the difference in quality after compressing a wave file into a 320kbps Mp3.</p> <p>I listened, and listened, but there was no difference to be heard. Don’t believe me? See if you can spot the points where the quality changes.</p> <center> <figure> <figure> <audio src="/_pages/maciek.github.io/audio-compression/stage1_T2.mp3" controls=""></audio> </figure> </figure> </center> <p>Did you hear any difference? No? Yes? Maybe? Try it again and listen for an increase in quality at 5 seconds which disappears at 16. Using modern Mp3 encoding methods, a 320 bit rate Mp3 sounds very much like the original (at least to my ears).</p> <center> <figure> <div class="row mt-3"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" srcset=" /_pages/maciek.github.io/audio-compression/81-480.webp 480w, /_pages/maciek.github.io/audio-compression/81-800.webp 800w, /_pages/maciek.github.io/audio-compression/81-1400.webp 1400w, " sizes="95vw" type="image/webp"></source> <img src="/_pages/maciek.github.io/audio-compression/81.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> </figure> </center> <p>I repeated the same test using a VBR Mp3 instead of the normal 320kbps. As you can see the difference file is smaller from the normal 320 bitrate Mp3. You can listen to it and see if there is any detectable change in playback quality.</p> <center> <figure> <figure> <audio src="/_pages/maciek.github.io/audio-compression/stage2_T3.mp3" controls=""></audio> </figure> </figure> </center> <p>The quality should increase slightly after 5 seconds, then drop off at 16. I cannot hear any difference here as well. So does it mean that the 320kbps MPS sounds as good as an uncompressed CD .wav format?</p> <p>In order to do a more obvious comparison I did the same test using a 56 bit rate Mp3 and the results were, as expected, humongous. The difference track was huge. You could really see how much audio was lost in compression. The 56 bit rate audio sounded horrible, but as soon as I unmuted the difference track it was suddenly sounding like the CD once again. You can hear it for yourself here.</p> <center> <figure> <figure> <audio src="/_pages/maciek.github.io/audio-compression/stage3_T4.mp3" controls=""></audio> </figure> </figure> </center> <p>In the end, I have to say that it is (almost) impossible to tell the difference between a song as an uncompressed wave file and a song that has been compressed as 320 VBR. I used DT 770s and my M-audio interface for these tests, and of course all results were confirmed using my teenage ears. Furthermore, the 320 VBR file I used wighted 8.2 MB, the normal CBR Mp3 weighted 10.3 MB, and the uncompressed wave weighted 45.4 MB. This shows that the VBR method provides great results while taking 25.6% less space than a normal CBR method in this example.</p> <p>I think many people are not 100% honest with themselves when they say that all Mp3s sound worse than CDs. This goes especially for people with worn out ears who speak such heresies. On the contrary, I’ve read a few interesting posts where audiophiles argued that the average person doesn’t have the knowledge or experience to verbalize the fact that what they hear is an MP3. I don’t think that is the case in the kind of tests I conducted, as I tried it on few other recordings, and all the findings were the same. However, it may vary in more surgical audio situations where a trained ear, that knows exactly what to look for in the high frequencies, will be able to distinguish between a wave file and Mp3. Often, it will be the ’air’ of high frequencies that may provide some small differences between a good quality MP3 and a .wav file.</p> <p>Speaking of recording, mixing and mastering though… I would never include good quality Mp3 files in my mixes because I believe there are certain situations that ask for certain tools. I’d try to keep my recordings the highest quality possible, but that also may change depending on a final, envisioned version of a song I’ll mix.</p> <p>Again, Mp3 algorithms improved drastically over the past decade. We do not suffer anymore from tons of audio errors if an Mp3 is ‘only’ 192kbps. In fact, I’m positive that dropping to 128kbps would still be acceptable for many people. Especially if played on poor playback platforms such as iPods, iPods or similar, where listening conditions aren’t great anyways. I think we should admit however, that correctly compressed, high quality Mp3s are good enough to satisfy the needs of serious music listeners. Listeners who strive for a really good quality sounds that can be expressed through some expensive equipment.</p> <p>I’m also attaching this little section here, as I find it really fascinating how the same file compression comparison test can be shown visually.</p> <p>So here is an alternative way of looking at compression subject.</p> <p><a title="Lossy Audio Codec's Comparison" href="http://www.head-fi.org/t/225356/lossy-audio-codecs-comparison-huge-amount-of-pics-itunes-update-on-p-7" target="_blank" rel="external nofollow noopener">Lossy Audio Codec’s Comparison</a></p> <p>Another interesting visual example.</p> <p><a title="How to check quality of Mp3 file" href="http://www.walterdevos.be/how-to-check-quality-of-mp3-file" target="_blank" rel="external nofollow noopener">How to check quality of Mp3 file</a></p> <p>I’d like to thank <a id="yui-gen18" title="Bugbrain's post on Recordingreview.com" href="http://forum.recordingreview.com/f8/endless-mp3-vs-wav-debate-randomized-blind-listening-test-40661/" target="_blank" rel="nofollow">Bugbrain</a>, <a title="Forum profile" href="http://www.head-fi.org/u/49722/sir-nobax" target="_blank" rel="external nofollow noopener">Nobax</a>, <a title="Walter's blog" href="http://blog.walterdevos.be/" target="_blank" rel="external nofollow noopener">Walter</a>, and <a title="Jax's website" href="http://www.jax184.com/" target="_blank" rel="external nofollow noopener">Jax</a> for inspiring me to conduct this experiment.</p> <p>Maciek</p> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Maciek Tomczak. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TJ1FNYQNJH"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TJ1FNYQNJH");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>